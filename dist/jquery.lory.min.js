(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")exports["lory"]=factory();else root["lory"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports["default"]=lory;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _utilsDetectPrefixesJs=__webpack_require__(1);var _utilsDetectPrefixesJs2=_interopRequireDefault(_utilsDetectPrefixesJs);var _utilsDispatchEventJs=__webpack_require__(2);var _utilsDispatchEventJs2=_interopRequireDefault(_utilsDispatchEventJs);var _defaultsJs=__webpack_require__(4);var _defaultsJs2=_interopRequireDefault(_defaultsJs);var slice=Array.prototype.slice;function lory(slider,opts){var position=undefined;var slidesWidth=undefined;var frameWidth=undefined;var slides=undefined;var frame=undefined;var slideContainer=undefined;var prevCtrl=undefined;var nextCtrl=undefined;var prefixes=undefined;var transitionEndCallback=undefined;var index=0;var options={};if(typeof jQuery!=="undefined"&&slider instanceof jQuery){slider=slider[0]}function setupInfinite(slideArray){var front=slideArray.slice(0,options.infinite);var back=slideArray.slice(slideArray.length-options.infinite,slideArray.length);front.forEach(function(element){var cloned=element.cloneNode(true);slideContainer.appendChild(cloned)});back.reverse().forEach(function(element){var cloned=element.cloneNode(true);slideContainer.insertBefore(cloned,slideContainer.firstChild)});slideContainer.addEventListener(prefixes.transitionEnd,onTransitionEnd);return slice.call(slideContainer.children)}function dispatchSliderEvent(phase,type,detail){(0,_utilsDispatchEventJs2["default"])(slider,phase+".lory."+type,detail)}function translate(to,duration,ease){var style=slideContainer&&slideContainer.style;if(style){style[prefixes.transition+"TimingFunction"]=ease;style[prefixes.transition+"Duration"]=duration+"ms";style[prefixes.transform]="translate3d("+to+"px, 0, 0)"}}function slide(nextIndex,direction){var currentSlide=index;var nextSlide=direction?index+1:index-1;dispatchSliderEvent("before","slide",{currentSlide:currentSlide,nextSlide:nextSlide});var maxOffset=Math.round(slidesWidth-frameWidth);var duration=options.slideSpeed;if(typeof nextIndex!=="number"){if(direction){nextIndex=index+options.slidesToScroll}else{nextIndex=index-options.slidesToScroll}}nextIndex=Math.min(Math.max(nextIndex,0),slides.length-1);if(options.infinite&&direction===undefined){nextIndex+=options.infinite}var nextOffset=Math.min(Math.max(slides[nextIndex].offsetLeft*-1,maxOffset*-1),0);if(options.rewind&&Math.abs(position.x)===maxOffset&&direction){nextOffset=0;nextIndex=0;duration=options.rewindSpeed}translate(nextOffset,duration,options.ease);position.x=nextOffset;if(slides[nextIndex].offsetLeft<=maxOffset){index=nextIndex}if(options.infinite){if(Math.abs(nextOffset)===maxOffset&&direction){index=options.infinite}if(Math.abs(nextOffset)===0&&!direction){index=slides.length-options.infinite*2}position.x=slides[index].offsetLeft*-1;transitionEndCallback=function(){translate(slides[index].offsetLeft*-1,0,null)}}dispatchSliderEvent("after","slide",{currentSlide:index})}function setup(){dispatchSliderEvent("before","init");prefixes=(0,_utilsDetectPrefixesJs2["default"])();options=_extends({},_defaultsJs2["default"],opts);frame=slider.getElementsByClassName(options.classNameFrame)[0];slideContainer=frame.getElementsByClassName(options.classNameSlideContainer)[0];prevCtrl=slider.getElementsByClassName(options.classNamePrevCtrl)[0];nextCtrl=slider.getElementsByClassName(options.classNameNextCtrl)[0];position={x:slideContainer.offsetLeft,y:slideContainer.offsetTop};if(options.infinite){slides=setupInfinite(slice.call(slideContainer.children))}else{slides=slice.call(slideContainer.children)}reset();if(prevCtrl&&nextCtrl){prevCtrl.addEventListener("click",prev);nextCtrl.addEventListener("click",next)}slideContainer.addEventListener("touchstart",onTouchstart);window.addEventListener("resize",onResize);dispatchSliderEvent("after","init")}function reset(){slidesWidth=slideContainer.getBoundingClientRect().width||slideContainer.offsetWidth;frameWidth=frame.getBoundingClientRect().width||frame.offsetWidth;if(frameWidth===slidesWidth){slidesWidth=slides.reduce(function(previousValue,slide){return previousValue+slide.getBoundingClientRect().width||slide.offsetWidth},0)}index=0;if(options.infinite){translate(slides[index+options.infinite].offsetLeft*-1,0,null);index=index+options.infinite;position.x=slides[index].offsetLeft*-1}else{translate(0,options.rewindSpeed,options.ease)}}function slideTo(index){slide(index)}function returnIndex(){return index}function prev(){slide(false,false)}function next(){slide(false,true)}function destroy(){dispatchSliderEvent("before","destroy");slideContainer.removeEventListener(prefixes.transitionEnd,onTransitionEnd);slideContainer.removeEventListener("touchstart",onTouchstart);window.removeEventListener("resize",onResize);if(prevCtrl){prevCtrl.removeEventListener("click",prev)}if(nextCtrl){nextCtrl.removeEventListener("click",next)}dispatchSliderEvent("after","destroy")}var touchOffset=undefined;var delta=undefined;var isScrolling=undefined;function onTransitionEnd(){if(transitionEndCallback){transitionEndCallback();transitionEndCallback=undefined}}function onTouchstart(event){var touches=event.touches[0];touchOffset={x:touches.pageX,y:touches.pageY,time:Date.now()};isScrolling=undefined;delta={};slideContainer.addEventListener("touchmove",onTouchmove);slideContainer.addEventListener("touchend",onTouchend);dispatchSliderEvent("on","touchstart",{event:event})}function onTouchmove(event){var touches=event.touches[0];delta={x:touches.pageX-touchOffset.x,y:touches.pageY-touchOffset.y};if(typeof isScrolling==="undefined"){isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y))}if(!isScrolling){translate(position.x+delta.x,0,null)}dispatchSliderEvent("on","touchmove",{event:event})}function onTouchend(event){var duration=Date.now()-touchOffset.time;var isValid=Number(duration)<300&&Math.abs(delta.x)>25||Math.abs(delta.x)>frameWidth/3;var isOutOfBounds=!index&&delta.x>0||index===slides.length-1&&delta.x<0;var direction=delta.x<0;if(!isScrolling){if(isValid&&!isOutOfBounds){slide(false,direction)}else{translate(position.x,options.snapBackSpeed)}}frame.removeEventListener("touchmove");frame.removeEventListener("touchend");dispatchSliderEvent("on","touchend",{event:event})}function onResize(event){dispatchSliderEvent("on","resize",{event:event});reset()}setup();return{setup:setup,reset:reset,slideTo:slideTo,returnIndex:returnIndex,prev:prev,next:next,destroy:destroy}}$.fn.lory=function(options){return this.each(function(){var instanceOptions;if(!$.data(this,"lory")){instanceOptions=$.extend({},options,$(this).data());$.data(this,"lory",lory(this,instanceOptions))}})};module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=detectPrefixes;function detectPrefixes(){var transform=undefined;var transition=undefined;var transitionEnd=undefined;(function(){var style=document.createElement("_").style;var prop=undefined;if(style[prop="webkitTransition"]===""){transitionEnd="webkitTransitionEnd";transition=prop}if(style[prop="transition"]===""){transitionEnd="transitionend";transition=prop}if(style[prop="webkitTransform"]===""){transform=prop}if(style[prop="msTransform"]===""){transform=prop}if(style[prop="transform"]===""){transform=prop}})();return{transform:transform,transition:transition,transitionEnd:transitionEnd}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=dispatchEvent;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _customEvent=__webpack_require__(3);var _customEvent2=_interopRequireDefault(_customEvent);function dispatchEvent(target,type,detail){var event=new _customEvent2["default"](type,{bubbles:true,cancelable:true,detail:detail});target.dispatchEvent(event)}module.exports=exports["default"]},function(module,exports){(function(global){var NativeCustomEvent=global.CustomEvent;function useNative(){try{var p=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===p.type&&"bar"===p.detail.foo}catch(e){}return false}module.exports=useNative()?NativeCustomEvent:"function"===typeof document.createEvent?function CustomEvent(type,params){var e=document.createEvent("CustomEvent");if(params){e.initCustomEvent(type,params.bubbles,params.cancelable,params.detail)}else{e.initCustomEvent(type,false,false,void 0)}return e}:function CustomEvent(type,params){var e=document.createEventObject();e.type=type;if(params){e.bubbles=Boolean(params.bubbles);e.cancelable=Boolean(params.cancelable);e.detail=params.detail}else{e.bubbles=false;e.cancelable=false;e.detail=void 0}return e}}).call(exports,function(){return this}())},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:false,infinite:false,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next"};module.exports=exports["default"]}])});